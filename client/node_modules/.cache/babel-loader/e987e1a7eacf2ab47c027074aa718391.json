{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rieck\\\\Documents\\\\Coding\\\\Spotify\\\\client\\\\src\\\\App.js\";\nimport React, { useState } from 'react';\nimport SpotifyWebApi from 'spotify-web-api-js';\nimport logo from \"./logo.svg\";\nimport './App.css';\n\nfunction App() {\n  const spotifyApi = new SpotifyWebApi();\n  const params = getHashParams();\n  const token = params.access_token;\n\n  if (token) {\n    spotifyApi.setAccessToken(token);\n  }\n\n  const [loggedIn, setLoggedIn] = useState(token ? true : false);\n  const [name, setName] = useState(\"Not Checked\");\n  const [albumArt, setAlbumArt] = useState(\"\");\n  const [topTracks, setTopTracks] = useState([]);\n\n  function getHashParams() {\n    var hashParams = {};\n    var e,\n        r = /([^&;=]+)=?([^&;]*)/g,\n        q = window.location.hash.substring(1);\n    e = r.exec(q);\n\n    while (e) {\n      hashParams[e[1]] = decodeURIComponent(e[2]);\n      e = r.exec(q);\n    }\n\n    return hashParams;\n  }\n\n  function getNowPlaying() {\n    spotifyApi.getMyCurrentPlaybackState().then(response => {\n      setName(response.item.name);\n      setAlbumArt(response.item.album.images[0].url);\n    });\n  }\n\n  function getTopTracks() {\n    const topOptions = {\n      limit: 50\n    };\n    const options = {\n      public: false,\n      name: \"Generated Playlist\"\n    };\n    spotifyApi.createPlaylist(params.current_user, options).then(() => {\n      spotifyApi.getUserPlaylists(params.current_user, playlistOptions).then(playlists => {\n        console.log(playlists);\n      });\n      spotifyApi.getMyTopTracks(topOptions).then(response => {\n        console.log(response.items[0].id);\n        setTopTracks(response.items);\n        let i = 0;\n\n        for (i; i < 50; i += 5) {\n          const tracks = {\n            limit: 20,\n            seed_tracks: [response.items[i].id, response.items[i + 1].id, response.items[i + 2].id, response.items[i + 3].id, response.items[i + 4].id]\n          };\n          spotifyApi.getRecommendations(tracks).then(recommendations => {\n            console.log(recommendations);\n            let trackNames = [];\n            recommendations.tracks.forEach(element => {\n              trackNames.push(element.id.toString());\n            });\n            spotifyApi.containsMySavedTracks(trackNames).then(isSaved => {\n              console.log(isSaved);\n              let newTracks = 0;\n              isSaved.forEach(element => {\n                if (!element && newTracks < 5) {\n                  newTracks++;\n                }\n              });\n            }).catch(error => {\n              console.log(error);\n            });\n            const playlistOptions = {\n              size: 50\n            };\n          });\n        }\n      });\n    });\n    console.log(topTracks[0]);\n  }\n\n  function getSimilarTrack() {\n    getTopTracks();\n  }\n\n  function createPlaylist() {\n    const options = {\n      public: false,\n      name: \"Generated Playlist\"\n    };\n    spotifyApi.createPlaylist(params.current_user, options);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"http://localhost:8888\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, \" Login to Spotify \"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, \"Now Playing: \", name), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: albumArt,\n    style: {\n      height: 150\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  })), loggedIn && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => getNowPlaying(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, \"Check Now Playing\"), loggedIn && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => getSimilarTrack(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, \"Similar Track\"), loggedIn && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => createPlaylist(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, \"Create Playlist\"));\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/rieck/Documents/Coding/Spotify/client/src/App.js"],"names":["React","useState","SpotifyWebApi","App","spotifyApi","params","getHashParams","token","access_token","setAccessToken","loggedIn","setLoggedIn","name","setName","albumArt","setAlbumArt","topTracks","setTopTracks","hashParams","e","r","q","window","location","hash","substring","exec","decodeURIComponent","getNowPlaying","getMyCurrentPlaybackState","then","response","item","album","images","url","getTopTracks","topOptions","limit","options","public","createPlaylist","current_user","getUserPlaylists","playlistOptions","playlists","console","log","getMyTopTracks","items","id","i","tracks","seed_tracks","getRecommendations","recommendations","trackNames","forEach","element","push","toString","containsMySavedTracks","isSaved","newTracks","catch","error","size","getSimilarTrack","height"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport SpotifyWebApi from 'spotify-web-api-js';\nimport logo from './logo.svg';\nimport './App.css';\n\nfunction App() {\n  const spotifyApi = new SpotifyWebApi();\n  const params = getHashParams()\n  const token = params.access_token;\n  if (token) {\n    spotifyApi.setAccessToken(token);\n  }\n  \n  const [loggedIn, setLoggedIn] = useState(token ? true : false);\n  const [name, setName] = useState(\"Not Checked\");\n  const [albumArt, setAlbumArt] = useState(\"\");\n  const [topTracks, setTopTracks] = useState([]);\n  \n  function getHashParams() {\n    var hashParams = {};\n    var e, r = /([^&;=]+)=?([^&;]*)/g,\n        q = window.location.hash.substring(1);\n    e = r.exec(q)\n    while (e) {\n       hashParams[e[1]] = decodeURIComponent(e[2]);\n       e = r.exec(q);\n    }\n    return hashParams;\n  }\n\n  function getNowPlaying() {\n    spotifyApi.getMyCurrentPlaybackState()\n      .then((response) => {\n              setName(response.item.name) \n              setAlbumArt(response.item.album.images[0].url)\n            }\n        );\n  }\n\n  function getTopTracks() {\n    const topOptions = {\n      limit: 50\n    }\n\n    const options = {\n      public: false,\n      name: \"Generated Playlist\"\n    }\n    spotifyApi.createPlaylist(params.current_user, options)\n    .then(() => {\n      spotifyApi.getUserPlaylists(params.current_user, playlistOptions)\n      .then(playlists => {\n        console.log(playlists)\n      })\n    spotifyApi.getMyTopTracks(topOptions)\n      .then((response) => {\n        console.log(response.items[0].id)\n        setTopTracks(response.items)\n        let i = 0;\n        for (i; i < 50; i += 5)\n        {\n          const tracks = {\n            limit: 20,\n            seed_tracks: [response.items[i].id, response.items[i + 1].id, response.items[i + 2].id, response.items[i + 3].id, response.items[i + 4].id]\n          }\n          spotifyApi.getRecommendations(tracks)\n          .then((recommendations) => {\n            console.log(recommendations)\n            let trackNames = []\n\n            recommendations.tracks.forEach((element) => {\n              trackNames.push(element.id.toString())\n            })\n\n            spotifyApi.containsMySavedTracks(trackNames)\n            .then(isSaved => {\n              console.log(isSaved)\n              let newTracks = 0;\n              isSaved.forEach((element) => {\n                if (!element && newTracks < 5)\n                {\n                  newTracks++;\n                }\n              })\n            })\n            .catch(error => {\n              console.log(error)\n            })\n\n            const playlistOptions = {\n              size: 50\n            }\n\n          })\n        }\n      })\n    })\n\n    console.log(topTracks[0])\n  }\n\n  function getSimilarTrack() {\n    getTopTracks()\n  }\n\n  function createPlaylist() {\n    const options = {\n      public: false,\n      name: \"Generated Playlist\"\n    }\n    spotifyApi.createPlaylist(params.current_user, options)\n  }\n  return (\n    <div className=\"App\">\n      <a href='http://localhost:8888' > Login to Spotify </a>\n      <div>\n        Now Playing: {name}\n      </div>\n      <div>\n        <img src={albumArt} style={{ height: 150 }}/>\n      </div>\n      {loggedIn &&\n        <button onClick={() => getNowPlaying()}>\n          Check Now Playing\n        </button>\n      }\n      {loggedIn &&\n        <button onClick={() => getSimilarTrack()}>\n          Similar Track\n        </button>\n      }\n      {loggedIn &&\n        <button onClick={() => createPlaylist()}>\n          Create Playlist\n        </button>\n      }      \n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}